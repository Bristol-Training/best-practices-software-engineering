{"title":"Appendix: Generating documentation web pages","markdown":{"headingText":"Appendix: Generating documentation web pages","containsRefs":false,"markdown":"\nProviding documentation for your functions inside the Python Console is a useful thing to do but it's expected of most publicly published projects to also have a web-browsable version as well. There is a tool for Python called [Sphinx](https://www.sphinx-doc.org) which does exactly that.\n\nMake sure Sphinx is installed. Test in the Terminal that `sphinx-build` exists by running it and checking that it returns the message:\n\n```\nusage: sphinx-build [OPTIONS] SOURCEDIR OUTPUTDIR [FILENAMES...]\nsphinx-build: error: the following arguments are required: sourcedir, outputdir, filenames\n```\n\nIf it is not installed then either:\n- install it into the base environment through Anaconda Navigator\n- or create a new environment, install both `jupyterlab` and `sphinx` and then restart JupyterLab in that environment.\n\nOpen up the terminal and make sure that you are in the correct directory. You can check this by running `ls` if you are on Linux or MacOS or `dir` if you are running Windows. You should see `arrays.py` listed in the output.\n\nWe are now going to create a set of Sphinx configuration files. Sphinx provides a tool called `sphinx-quickstart` for this purpose which will ask you a few questions and create all the files it needs. In the Terminal, type:\n\n`sphinx-quickstart`\n\nand answer the questions it asks in the following way:\n\n- `n` to `Separate source and build directories`\n- Set the project name to `Arrays`\n- Enter your name as the `Author name`\n- Just press enter for `Project release`\n- Just press enter for `Project language`\n\nAfter that it should return you to the Terminal prompt.\n\nNow that we have the configuration for Sphinx set up, run `make html` which will go ahead and generate the documentation and create some HTML files on your computer. To find out where they went, run the following in the Python Console:\n\n```python\nimport os\nprint(f\"file://{os.getcwd()}/_build/html/index.html\")\n```\n\nThat will print out something like `file:///home/matt/bestpractices/_build/html/index.html`. Copy and paste that into the URL bar in your web browser and it should bring up the documentation. It should look like:\n\n![Arrays documentation](../assets/arrays_page1.png \"Arrays documentation\")\n\n::: {#exampleN .callout-note icon=false title='Exercise'}\n\nAdd some text (it doesn't matter too much what you write) between the `toctree` block and `Indices and tables` in `index.rst`. Make sure that it is not indented at all. Regenerate the documentation pages with `make html` and refresh your web browser. You should see the text appear.\n:::\n\n::: {#answerN .callout-caution icon=false title='Answer' collapse=\"true\"}\n{{< include ./answer_simple_doc_message.qmd >}}\n:::\n\n## Adding our documentation to Sphinx\n\nIn order for our function and module documentation to show up in the HTML pages we need to make a few tweaks to the Sphinx configuration.\n\nFirst we need to enable the `autodoc` extension so that Sphinx can create documentation pages from Python source code and the `napoleon` extension so that it understands the Google-style docstrings. Open `conf.py` (it's a normal Python file) and find the `extensions` variable. It will be defined to be an empty list. Edit it so that it reads:\n\n```python\nextensions = [\n    'sphinx.ext.autodoc',\n    'sphinx.ext.napoleon',\n]\n```\n\nThe other change we need to make in `conf.py` is is to allow Sphinx to import our `arrays` module. To allow this it needs to have the current directory in its search path. Find on lines 13, 14, and 15 the lines that read:\n\n```python\n# import os\n# import sys\n# sys.path.insert(0, os.path.abspath('.'))\n```\n\nand uncomment them so that they look like:\n\n```python\nimport os\nimport sys\nsys.path.insert(0, os.path.abspath('.'))\n```\n\nThis is all the configuration changes we need to make. We're now ready to tell Sphinx about our module. To do this we will put some special code in a file called `arrays.rst` whcih Sphinx will interpret to find our source code and documentation.\n\nCreate a new files called `arrays.rst` and put the following:\n\n```rst\narrays module\n=============\n\n.. automodule:: arrays\n   :members:\n   :undoc-members:\n   :show-inheritance:\n```\n\nThen edit the `toctree` directive in `index.rst` to look like:\n\n```rst\n.. toctree::\n   :maxdepth: 2\n   :caption: Contents:\n   \n   arrays\n```\n\nbeing careful to check that the indentation is correct and lines up.\n\nRun `make html` once more and refresh the documentation HTML page. On the main page, click \"arrays module\". This will take you to the page with the documentation. It should look like:\n\n![Arrays documentation](../assets/arrays_page3.png \"Arrays documentation\")\n\nYou'll see here that the module docstring is shown at the top, followed by the documentation for the function. It's formatted the parameters and return types nicely and has even highlighted the example as Python code.\n\n::: {#exampleN .callout-note icon=false title='Exercise'}\nTry changing the theme to one from\n\n[https://www.sphinx-doc.org/en/master/usage/theming.html#builtin-themes](https://www.sphinx-doc.org/en/master/usage/theming.html#builtin-themes)\n:::\n\nSphinx is by far the most commonly used documentation tool for Python projects. It's even used by [the official Python documentation](https://docs.python.org). If you have your Python project hosted at a publicly visible Git hosting site like GitHub, GitLab or Bitbucket, there is a free service called [Read The Docs](https://readthedocs.org) which can build and host your pages for you.\n\nWhen using Git or any other version control software, you should make sure you check in your documentation sources alongside your code. For Sphinx, make sure you add `conf.py`, any `rst` files you create manually and the \"make\" files. Do not commit to Git any HTML output from running Sphinx.\n","srcMarkdownNoYaml":""},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":true,"eval":true,"cache":null,"freeze":"auto","echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"markdown"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","toc":true,"shift-heading-level-by":1,"highlight-style":"github","output-file":"appendix_sphinx.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.5.57","theme":["cosmo","../styles.scss"]},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}